<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GC MASTER PRO - Elite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,400;0,700;0,900;1,900&display=swap');
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        .safe-area-bottom { padding-bottom: env(safe-area-inset-bottom); }
        .custom-scroll::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- DATOS ESTRUCTURADOS ---
        const TEMARIO = [
            { id: 1, name: "Derechos Humanos", cat: "Jur√≠dicas" }, { id: 2, name: "Igualdad", cat: "Jur√≠dicas" },
            { id: 3, name: "Prevenci√≥n de Riesgos Laborales", cat: "Jur√≠dicas" }, { id: 4, name: "Derecho Constitucional", cat: "Jur√≠dicas" },
            { id: 5, name: "Derecho de la Uni√≥n Europea", cat: "Jur√≠dicas" }, { id: 6, name: "Instituciones Internacionales", cat: "Jur√≠dicas" },
            { id: 7, name: "Derecho Civil", cat: "Jur√≠dicas" }, { id: 8, name: "Derecho Penal", cat: "Jur√≠dicas" },
            { id: 9, name: "Derecho Procesal Penal", cat: "Jur√≠dicas" }, { id: 10, name: "Derecho Administrativo", cat: "Jur√≠dicas" },
            { id: 11, name: "Protecci√≥n de Datos", cat: "Jur√≠dicas" }, { id: 12, name: "Extranjer√≠a e Inmigraci√≥n", cat: "Jur√≠dicas" },
            { id: 13, name: "Seguridad P√∫blica y Privada", cat: "Jur√≠dicas" }, { id: 14, name: "Ministerio del Interior y Defensa", cat: "Jur√≠dicas" },
            { id: 15, name: "Fuerzas y Cuerpos de Seguridad", cat: "Jur√≠dicas" }, { id: 16, name: "Protecci√≥n Civil", cat: "Socio-Cultural" },
            { id: 17, name: "Desarrollo Sostenible", cat: "Socio-Cultural" }, { id: 18, name: "Eficiencia Energ√©tica", cat: "Socio-Cultural" },
            { id: 19, name: "Tecnolog√≠as de la Informaci√≥n", cat: "T√©cnicas" }, { id: 20, name: "Estad√≠stica", cat: "T√©cnicas" },
            { id: 21, name: "Topograf√≠a", cat: "T√©cnicas" }, { id: 22, name: "Automovilismo", cat: "T√©cnicas" },
            { id: 23, name: "Armamento y Tiro", cat: "T√©cnicas" }, { id: 24, name: "Transmisiones", cat: "T√©cnicas" },
            { id: 25, name: "Lengua Extranjera (Ingl√©s)", cat: "Ingl√©s" }
        ];

        const BLOQUES = [
            { id: 'B1', name: "Bloque Jur√≠dico", temas: "Temas 1 al 15", color: "bg-blue-600" },
            { id: 'B2', name: "Bloque Socio-Cultural", temas: "Temas 16 al 18", color: "bg-purple-600" },
            { id: 'B3', name: "Bloque T√©cnico", temas: "Temas 19 al 24", color: "bg-orange-600" }
        ];

        const AUXILIARES = [
            { id: 'PSI', name: "Psicot√©cnicos", desc: "Razonamiento y l√≥gica", icon: "üß†" },
            { id: 'ORT', name: "Ortograf√≠a", desc: "Uso correcto de letras", icon: "‚úçÔ∏è" },
            { id: 'GRA', name: "Gram√°tica", desc: "Sintaxis y morfolog√≠a", icon: "üìñ" },
            { id: 'ING', name: "Ingl√©s Refuerzo", desc: "Grammar & Vocabulary", icon: "üá¨üáß" }
        ];

        const OFICIALES = ["2025", "2024", "2023", "2022"];

        // --- COMPONENTE PRINCIPAL ---
        const App = () => {
            const [view, setView] = useState('home');
            const [activeTab, setActiveTab] = useState('temas');
            const [selection, setSelection] = useState(null);
            const [numQuestions, setNumQuestions] = useState(20);
            const [loading, setLoading] = useState(false);
            const [testState, setTestState] = useState({ questions: [], current: 0, answers: [], isDone: false });

            // Simulaci√≥n de generaci√≥n de test (Aqu√≠ se conectar√≠a con la IA o base de datos)
            const generateTest = (item) => {
                setLoading(true);
                setTimeout(() => {
                    const mockQuestions = Array.from({ length: numQuestions }, (_, i) => ({
                        id: i,
                        q: `Pregunta de examen sobre ${item.name || item} (${i + 1})`,
                        options: ["Respuesta Correcta A", "Respuesta Incorrecta B", "Respuesta Incorrecta C", "Respuesta Incorrecta D"],
                        correct: 0,
                        expl: "Esta es la explicaci√≥n oficial detallada basada en el temario de la Guardia Civil."
                    }));
                    setTestState({ questions: mockQuestions, current: 0, answers: [], isDone: false });
                    setView('quiz');
                    setLoading(false);
                }, 1000);
            };

            const handleAnswer = (idx) => {
                if (testState.answers[testState.current] !== undefined) return;
                const newAnswers = [...testState.answers];
                newAnswers[testState.current] = idx;
                setTestState({ ...testState, answers: newAnswers });
            };

            if (loading) return (
                <div className="min-h-screen bg-[#064d2e] flex flex-col items-center justify-center text-white p-10">
                    <div className="w-16 h-16 border-4 border-emerald-400 border-t-transparent rounded-full animate-spin mb-6"></div>
                    <h2 className="text-2xl font-black italic tracking-tighter">GENERANDO TEST...</h2>
                    <p className="text-emerald-300 mt-2 uppercase text-[10px] font-bold tracking-widest">Ajustando dificultad y temario</p>
                </div>
            );

            return (
                <div className="min-h-screen bg-slate-50 max-w-2xl mx-auto shadow-2xl shadow-black/10 overflow-x-hidden">
                    {/* HEADER */}
                    <header className="bg-[#064d2e] text-white pt-12 pb-14 px-6 rounded-b-[3rem] sticky top-0 z-50 shadow-lg">
                        <div className="flex justify-between items-center mb-6">
                            <div onClick={() => setView('home')} className="cursor-pointer">
                                <h1 className="text-2xl font-black italic leading-none tracking-tighter">GC MASTER PRO</h1>
                                <p className="text-[10px] font-bold text-emerald-400 uppercase tracking-widest mt-1">Academia de Oposiciones</p>
                            </div>
                            <div className="bg-white/10 p-2 rounded-2xl border border-white/5 backdrop-blur-sm">
                                <div className="w-10 h-10 flex items-center justify-center font-black text-emerald-400">GC</div>
                            </div>
                        </div>

                        {view === 'home' && (
                            <div className="flex bg-black/20 p-1.5 rounded-2xl backdrop-blur-md">
                                {['temas', 'bloques', 'aux'].map(tab => (
                                    <button 
                                        key={tab} 
                                        onClick={() => setActiveTab(tab)}
                                        className={`flex-1 py-3 rounded-xl text-[10px] font-black uppercase transition-all ${activeTab === tab ? 'bg-white text-[#064d2e] shadow-lg' : 'text-emerald-200/60'}`}
                                    >
                                        {tab}
                                    </button>
                                ))}
                            </div>
                        )}
                    </header>

                    <main className="px-5 -mt-8 pb-24">
                        {view === 'home' && (
                            <div className="space-y-6">
                                {/* ACCESO R√ÅPIDO - PREGUNTAS M√ÅS REPETIDAS */}
                                <button 
                                    onClick={() => setView('config-test') || setSelection({name: "Preguntas M√°s Repetidas (Top Examen)"})}
                                    className="w-full bg-gradient-to-r from-emerald-600 to-emerald-800 p-6 rounded-[2.5rem] shadow-xl text-left relative overflow-hidden group active:scale-[0.98] transition-all"
                                >
                                    <div className="relative z-10">
                                        <p className="text-emerald-300 text-[10px] font-black uppercase mb-1">Algoritmo IA</p>
                                        <h3 className="text-white text-xl font-black italic">TOP PREGUNTAS REPETIDAS</h3>
                                        <p className="text-emerald-100/60 text-xs mt-1">Generar test basado en estad√≠sticas oficiales</p>
                                    </div>
                                    <span className="absolute right-[-20px] bottom-[-20px] text-8xl opacity-10 italic font-black text-white">‚òÖ</span>
                                </button>

                                {/* LISTADOS SEG√öN TAB */}
                                <div className="space-y-3">
                                    {activeTab === 'temas' && (
                                        <>
                                            <p className="text-[10px] font-black text-slate-400 uppercase ml-4 tracking-widest">Temario Oficial 2025</p>
                                            {TEMARIO.map(t => (
                                                <button key={t.id} onClick={() => { setView('config-test'); setSelection(t); }} className="w-full bg-white p-4 rounded-3xl flex items-center justify-between shadow-sm border border-slate-100 hover:border-emerald-200 active:bg-slate-50 transition-all">
                                                    <div className="flex items-center gap-4">
                                                        <div className="w-10 h-10 bg-slate-100 rounded-2xl flex items-center justify-center font-black text-xs text-slate-400">{t.id}</div>
                                                        <div className="text-left">
                                                            <p className="text-sm font-bold text-slate-800">{t.name}</p>
                                                            <p className="text-[9px] font-bold text-slate-400 uppercase tracking-tighter">{t.cat}</p>
                                                        </div>
                                                    </div>
                                                    <span className="text-slate-300">‚Üí</span>
                                                </button>
                                            ))}
                                        </>
                                    )}

                                    {activeTab === 'bloques' && (
                                        <>
                                            <p className="text-[10px] font-black text-slate-400 uppercase ml-4 tracking-widest">Estudio por Bloques</p>
                                            {BLOQUES.map(b => (
                                                <button key={b.id} onClick={() => { setView('config-test'); setSelection(b); }} className="w-full bg-white p-6 rounded-[2.5rem] flex items-center gap-5 shadow-sm active:scale-[0.98] transition-all text-left border border-slate-100">
                                                    <div className={`w-14 h-14 rounded-2xl ${b.color} flex items-center justify-center text-white font-black shadow-lg shadow-black/5`}>{b.id}</div>
                                                    <div>
                                                        <p className="font-black text-slate-800 text-sm uppercase italic">{b.name}</p>
                                                        <p className="text-[10px] text-slate-400 font-bold">{b.temas}</p>
                                                    </div>
                                                </button>
                                            ))}
                                        </>
                                    )}

                                    {activeTab === 'aux' && (
                                        <>
                                            <p className="text-[10px] font-black text-slate-400 uppercase ml-4 tracking-widest">Materias Auxiliares</p>
                                            <div className="grid grid-cols-2 gap-3">
                                                {AUXILIARES.map(a => (
                                                    <button key={a.id} onClick={() => { setView('config-test'); setSelection(a); }} className="bg-white p-6 rounded-[2.5rem] shadow-sm border border-slate-100 text-left active:scale-[0.98] transition-all">
                                                        <span className="text-3xl mb-3 block">{a.icon}</span>
                                                        <p className="font-black text-slate-800 text-xs uppercase">{a.name}</p>
                                                        <p className="text-[9px] text-slate-400 font-bold mt-1 leading-tight">{a.desc}</p>
                                                    </button>
                                                ))}
                                            </div>
                                        </>
                                    )}
                                </div>

                                {/* EX√ÅMENES OFICIALES */}
                                <div className="space-y-3">
                                    <p className="text-[10px] font-black text-slate-400 uppercase ml-4 tracking-widest">Ex√°menes Reales Anteriores</p>
                                    <div className="grid grid-cols-4 gap-2">
                                        {OFICIALES.map(year => (
                                            <button key={year} onClick={() => { setView('config-test'); setSelection(`Examen Oficial ${year}`); }} className="bg-slate-800 text-white py-4 rounded-2xl font-black text-xs shadow-lg active:bg-black transition-all italic">
                                                {year}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        )}

                        {view === 'config-test' && (
                            <div className="bg-white p-8 rounded-[3rem] shadow-2xl border border-slate-100 animate-in slide-in-from-bottom-10 fade-in duration-500">
                                <h2 className="text-2xl font-black text-slate-800 italic mb-2 uppercase">Configurar Test</h2>
                                <p className="text-emerald-600 font-bold text-sm mb-8">{selection?.name || selection}</p>
                                
                                <p className="text-[10px] font-black text-slate-400 uppercase mb-4 tracking-widest">N√∫mero de preguntas</p>
                                <div className="grid grid-cols-5 gap-2 mb-10">
                                    {[20, 25, 50, 75, 100].map(n => (
                                        <button 
                                            key={n} 
                                            onClick={() => setNumQuestions(n)}
                                            className={`py-4 rounded-2xl font-black text-xs transition-all ${numQuestions === n ? 'bg-[#064d2e] text-white shadow-lg' : 'bg-slate-100 text-slate-400'}`}
                                        >
                                            {n}
                                        </button>
                                    ))}
                                </div>

                                <div className="space-y-3">
                                    <button onClick={() => generateTest(selection)} className="w-full bg-emerald-600 text-white py-5 rounded-2xl font-black shadow-xl shadow-emerald-600/20 active:scale-95 transition-all">
                                        COMENZAR EXAMEN
                                    </button>
                                    <button onClick={() => setView('home')} className="w-full bg-slate-100 text-slate-400 py-5 rounded-2xl font-black text-xs uppercase">
                                        Cancelar
                                    </button>
                                </div>
                            </div>
                        )}

                        {view === 'quiz' && (
                            <div className="space-y-4 pt-4">
                                <div className="flex justify-between items-center px-4">
                                    <div className="bg-[#064d2e] text-white text-[9px] font-black px-4 py-2 rounded-full uppercase italic tracking-tighter">
                                        {selection?.name || selection}
                                    </div>
                                    <div className="text-[10px] font-black text-slate-400">
                                        {testState.current + 1} / {testState.questions.length}
                                    </div>
                                </div>

                                <div className="bg-white p-8 rounded-[3rem] shadow-2xl border border-slate-100 min-h-[450px] flex flex-col">
                                    <h3 className="text-lg font-bold text-slate-800 leading-tight mb-8">
                                        {testState.questions[testState.current].q}
                                    </h3>
                                    
                                    <div className="space-y-3 flex-grow">
                                        {testState.questions[testState.current].options.map((opt, i) => {
                                            const isResponded = testState.answers[testState.current] !== undefined;
                                            const isSelected = testState.answers[testState.current] === i;
                                            const isCorrect = i === testState.questions[testState.current].correct;

                                            let btnStyle = "bg-slate-50 border-slate-100 text-slate-600";
                                            if (isResponded) {
                                                if (isCorrect) btnStyle = "bg-emerald-50 border-emerald-500 text-emerald-700";
                                                else if (isSelected) btnStyle = "bg-red-50 border-red-500 text-red-700";
                                                else btnStyle = "opacity-40 bg-slate-50 grayscale";
                                            }

                                            return (
                                                <button 
                                                    key={i} 
                                                    onClick={() => handleAnswer(i)}
                                                    className={`w-full p-5 rounded-3xl border-2 text-left text-sm font-bold flex gap-4 transition-all ${btnStyle}`}
                                                >
                                                    <span className="w-6 h-6 shrink-0 bg-white border rounded-lg flex items-center justify-center text-[10px] font-black">
                                                        {String.fromCharCode(65 + i)}
                                                    </span>
                                                    {opt}
                                                </button>

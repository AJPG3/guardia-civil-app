<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GC MASTER ELITE 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .active-scale:active { transform: scale(0.96); }
        .tab-transition { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- BASE DE DATOS OFICIAL DE TEMAS ---
        const TEMAS_DB = [
            { id: 1, name: "Derechos Humanos", block: "Ciencias Jur√≠dicas" },
            { id: 2, name: "Igualdad y Violencia de G√©nero", block: "Ciencias Jur√≠dicas" },
            { id: 3, name: "Prevenci√≥n de Riesgos Laborales", block: "Ciencias Jur√≠dicas" },
            { id: 4, name: "Derecho Constitucional", block: "Ciencias Jur√≠dicas" },
            { id: 5, name: "Derecho de la Uni√≥n Europea", block: "Ciencias Jur√≠dicas" },
            { id: 6, name: "Instituciones Internacionales", block: "Ciencias Jur√≠dicas" },
            { id: 7, name: "Derecho Civil", block: "Ciencias Jur√≠dicas" },
            { id: 8, name: "Derecho Penal", block: "Ciencias Jur√≠dicas" },
            { id: 9, name: "Derecho Procesal Penal", block: "Ciencias Jur√≠dicas" },
            { id: 10, name: "Derecho Administrativo", block: "Ciencias Jur√≠dicas" },
            { id: 11, name: "Protecci√≥n de Datos", block: "Ciencias Jur√≠dicas" },
            { id: 12, name: "Extranjer√≠a e Inmigraci√≥n", block: "Ciencias Jur√≠dicas" },
            { id: 13, name: "Seguridad P√∫blica y Privada", block: "Ciencias Jur√≠dicas" },
            { id: 14, name: "Ministerio del Interior y de Defensa", block: "Ciencias Jur√≠dicas" },
            { id: 15, name: "Fuerzas y Cuerpos de Seguridad", block: "Ciencias Jur√≠dicas" },
            { id: 16, name: "Socio-Cultural: Protecci√≥n Civil", block: "Socio-Culturales" },
            { id: 17, name: "Socio-Cultural: Desarrollo Sostenible", block: "Socio-Culturales" },
            { id: 18, name: "Socio-Cultural: Eficiencia Energ√©tica", block: "Socio-Culturales" },
            { id: 19, name: "T√©cnico: Tecnolog√≠as de la Informaci√≥n", block: "T√©cnico-Cient√≠ficas" },
            { id: 20, name: "T√©cnico: Topograf√≠a", block: "T√©cnico-Cient√≠ficas" },
            { id: 21, name: "T√©cnico: Automovilismo", block: "T√©cnico-Cient√≠ficas" },
            { id: 22, name: "T√©cnico: Armas y Explosivos", block: "T√©cnico-Cient√≠ficas" },
            { id: 23, name: "T√©cnico: Transmisiones", block: "T√©cnico-Cient√≠ficas" },
            { id: 24, name: "Lengua Extranjera: Ingl√©s", block: "Ingl√©s" },
            { id: 25, name: "Ortograf√≠a y Gram√°tica", block: "Lengua Espa√±ola" }
        ];

        const BLOQUES = ["Ciencias Jur√≠dicas", "Socio-Culturales", "T√©cnico-Cient√≠ficas", "Ingl√©s", "Lengua Espa√±ola"];

        const EXAMENES_OFICIALES = [
            { id: '2025', name: "Examen Oficial 2025", hot: true },
            { id: '2024', name: "Examen Oficial 2024", hot: false },
            { id: '2023', name: "Examen Oficial 2023", hot: false }
        ];

        const App = () => {
            const [view, setView] = useState('home');
            const [activeTab, setActiveTab] = useState('bloques');
            const [test, setTest] = useState({ questions: [], current: 0, answers: {} });
            const [errors, setErrors] = useState([]);
            const [numQ, setNumQ] = useState(20);
            const [selectedTopic, setSelectedTopic] = useState(null);

            useEffect(() => {
                const saved = localStorage.getItem('gc_errors_v3');
                if (saved) setErrors(JSON.parse(saved));
            }, []);

            useEffect(() => {
                localStorage.setItem('gc_errors_v3', JSON.stringify(errors));
            }, [errors]);

            const startTest = (target) => {
                const qs = Array.from({ length: numQ }, (_, i) => ({
                    id: Math.random(),
                    topic: target.name || target,
                    q: `¬øCu√°l es el precepto fundamental de ${target.name || target} aplicado en la convocatoria oficial?`,
                    options: ["Respuesta Correcta seg√∫n Ley", "Opci√≥n distractora A", "Opci√≥n distractora B", "Opci√≥n distractora C"],
                    correct: 0,
                    expl: "Explicaci√≥n basada en el BOE y manuales de la Academia."
                }));
                setTest({ questions: qs, current: 0, answers: {} });
                setView('quiz');
            };

            const handleAnswer = (ansIdx) => {
                const currentQ = test.questions[test.current];
                const newAnswers = { ...test.answers, [test.current]: ansIdx };
                setTest({ ...test, answers: newAnswers });
                if (ansIdx !== currentQ.correct) {
                    setErrors(prev => [currentQ, ...prev.filter(e => e.q !== currentQ.q)].slice(0, 50));
                }
            };

            return (
                <div className="min-h-screen max-w-md mx-auto bg-white shadow-2xl flex flex-col relative overflow-hidden">
                    {/* CABECERA */}
                    <header className="bg-[#043d26] text-white pt-8 pb-12 px-6 rounded-b-[3rem] shrink-0 z-20 shadow-lg">
                        <div className="flex justify-between items-center mb-6">
                            <div>
                                <h1 className="text-2xl font-black italic tracking-tighter">GC MASTER</h1>
                                <p className="text-[10px] text-emerald-400 font-bold tracking-widest uppercase">Elite Edition 2025</p>
                            </div>
                            <button onClick={() => setView('errors')} className="bg-red-500/20 border border-red-500/50 text-red-100 px-4 py-2 rounded-2xl text-[10px] font-black uppercase flex items-center gap-2">
                                <span className="w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
                                Fallos: {errors.length}
                            </button>
                        </div>

                        {view === 'home' && (
                            <div className="flex bg-black/30 p-1.5 rounded-2xl backdrop-blur-md">
                                {[
                                    {id: 'bloques', n: 'Bloques'}, 
                                    {id: 'temas', n: 'Temas'}, 
                                    {id: 'hot', n: 'Top Repetidas'},
                                    {id: 'oficial', n: '2025'}
                                ].map(t => (
                                    <button 
                                        key={t.id} 
                                        onClick={() => setActiveTab(t.id)} 
                                        className={`flex-1 py-2.5 text-[9px] font-black uppercase rounded-xl transition-all ${activeTab === t.id ? 'bg-white text-[#043d26] shadow-xl' : 'text-white/40'}`}
                                    >
                                        {t.n}
                                    </button>
                                ))}
                            </div>
                        )}
                    </header>

                    {/* CONTENIDO PRINCIPAL */}
                    <main className="flex-grow overflow-y-auto px-5 -mt-6 no-scrollbar pb-32 z-10">
                        {view === 'home' && (
                            <div className="space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500">
                                
                                {activeTab === 'bloques' && BLOQUES.map(bloque => (
                                    <div key={bloque} onClick={() => { setSelectedTopic({name: bloque}); setView('config'); }} className="bg-white p-5 rounded-[2rem] shadow-sm border border-slate-100 flex items-center justify-between active-scale">
                                        <div className="flex items-center gap-4">
                                            <div className="w-10 h-10 bg-emerald-50 text-emerald-600 rounded-2xl flex items-center justify-center font-black">B</div>
                                            <div>
                                                <p className="text-sm font-black text-slate-800 uppercase tracking-tight">{bloque}</p>
                                                <p className="text-[10px] font-medium text-slate-400">Ver todos los temas del bloque</p>
                                            </div>
                                        </div>
                                        <span className="text-emerald-500">‚Üí</span>
                                    </div>
                                ))}

                                {activeTab === 'temas' && TEMAS_DB.map(t => (
                                    <div key={t.id} onClick={() => { setSelectedTopic(t); setView('config'); }} className="bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4 active-scale">
                                        <span className="w-8 h-8 bg-slate-50 rounded-lg flex items-center justify-center text-[10px] font-black text-slate-400">{t.id}</span>
                                        <div className="flex-1">
                                            <p className="text-[13px] font-bold text-slate-700 leading-tight">{t.name}</p>
                                            <p className="text-[8px] font-black text-slate-300 uppercase mt-1">{t.block}</p>
                                        </div>
                                    </div>
                                ))}

                                {activeTab === 'hot' && (
                                    <div className="space-y-3">
                                        <div className="bg-orange-500 p-4 rounded-2xl text-white mb-4">
                                            <p className="text-[10px] font-black uppercase">Modo Inteligente</p>
                                            <p className="text-sm font-bold">Preguntas que m√°s caen en los ex√°menes oficiales.</p>
                                        </div>
                                        {TEMAS_DB.slice(3, 10).map(t => (
                                            <div key={t.id} onClick={() => { setSelectedTopic(t); setView('config'); }} className="bg-white p-4 rounded-2xl border-l-4 border-orange-500 flex justify-between items-center shadow-sm active-scale">
                                                <span className="text-xs font-bold">{t.name}</span>
                                                <span className="text-[9px] bg-orange-100 text-orange-600 px-2 py-1 rounded font-black">üî• CALIENTE</span>
                                            </div>
                                        ))}
                                    </div>
                                )}

                                {activeTab === 'oficial' && EXAMENES_OFICIALES.map(ex => (
                                    <div key={ex.id} onClick={() => { setSelectedTopic(ex); setView('config'); }} className="bg-slate-900 p-6 rounded-[2rem] shadow-xl flex items-center justify-between active-scale">
                                        <div>
                                            <p className="text-emerald-400 text-[9px] font-black uppercase tracking-[0.2em] mb-1">Cuerpo Guardia Civil</p>
                                            <h3 className="text-white font-black italic text-lg uppercase leading-none">{ex.name}</h3>
                                        </div>
                                        <div className="w-12 h-12 bg-white/10 rounded-full flex items-center justify-center text-white">üèÜ</div>
                                    </div>
                                ))}
                            </div>
                        )}

                        {view === 'config' && (
                            <div className="bg-white p-8 rounded-[3rem] shadow-2xl border border-slate-50 mt-4 text-center animate-in zoom-in-95 duration-300">
                                <h3 className="text-xl font-black text-[#043d26] mb-2 uppercase italic">{selectedTopic.name}</h3>
                                <p className="text-slate-400 text-[10px] font-black mb-10 tracking-widest uppercase">Selecciona n√∫mero de preguntas</p>
                                
                                <div className="grid grid-cols-5 gap-2 mb-10">
                                    {[20, 25, 50, 75, 100].map(n => (
                                        <button key={n} onClick={() => setNumQ(n)} className={`py-4 rounded-2xl font-black text-[10px] transition-all ${numQ === n ? 'bg-[#043d26] text-white shadow-xl scale-110' : 'bg-slate-100 text-slate-400'}`}>{n}</button>
                                    ))}
                                </div>
                                <button onClick={() => startTest(selectedTopic)} className="w-full bg-emerald-600 text-white py-5 rounded-[2rem] font-black shadow-xl shadow-emerald-200 active-scale uppercase tracking-tighter">EMPEZAR SIMULACRO</button>
                                <button onClick={() => setView('home')} className="mt-8 text-[10px] font-black text-slate-300 uppercase underline">Volver al panel</button>
                            </div>
                        )}

                        {view === 'quiz' && (
                            <div className="space-y-4 pt-4 animate-in slide-in-from-right-10">
                                <div className="flex gap-1 overflow-x-auto no-scrollbar py-2">
                                    {test.questions.map((_, i) => (
                                        <div 
                                            key={i} 
                                            onClick={() => setTest({...test, current: i})}
                                            className={`h-1.5 min-w-[15px] rounded-full transition-all cursor-pointer ${test.current === i ? 'w-8 bg-emerald-500' : (test.answers[i] !== undefined ? 'bg-emerald-200' : 'bg-slate-200')}`}
                                        ></div>
                                    ))}
                                </div>

                                <div className="bg-white p-7 rounded-[2.5rem] shadow-xl border border-slate-100 min-h-[420px] relative">
                                    <div className="flex justify-between items-center mb-8">
                                        <span className="text-[10px] font-black text-emerald-600 bg-emerald-50 px-3 py-1 rounded-full">{test.current + 1} / {test.questions.length}</span>
                                        <span className="text-[9px] font-black text-slate-300 uppercase tracking-tighter">{selectedTopic.name}</span>
                                    </div>

                                    <h2 className="text-[16px] font-bold text-slate-800 mb-8 leading-snug">{test.questions[test.current].q}</h2>
                                    
                                    <div className="space-y-3">
                                        {test.questions[test.current].options.map((opt, i) => {
                                            const answered = test.answers[test.current] !== undefined;
                                            const correct = test.questions[test.current].correct;
                                            const selected = test.answers[test.current];

                                            let style = "bg-slate-50 border-slate-100 text-slate-600";
                                            if (answered) {
                                                if (i === correct) style = "bg-emerald-50 border-emerald-500 text-emerald-800 ring-2 ring-emerald-100";
                                                else if (i === selected) style = "bg-red-50 border-red-500 text-red-800 ring-2 ring-red-100";
                                                else style = "opacity-40 bg-slate-50 grayscale";
                                            }

                                            return (
                                                <button 
                                                    key={i} 
                                                    onClick={() => !answered && handleAnswer(i)} 
                                                    className={`w-full p-4 rounded-2xl border-2 text-left text-sm font-bold flex gap-4 transition-all ${style}`}
                                                >
                                                    <span className="w-6 h-6 shrink-0 bg-white border rounded-lg flex items-center justify-center text-[10px] font-black uppercase">{String.fromCharCode(65+i)}</span>
                                                    {opt}
                                                </button>
                                            );
                                        })}
                                    </div>

                                    {test.answers[test.current] !== undefined && (
                                        <div className="mt-8 p-5 bg-blue-50 rounded-[2rem] border border-blue-100 animate-in fade-in">
                                            <p className="text-[9px] font-black text-blue-600 uppercase mb-2">Retroalimentaci√≥n Oficial</p>
                                            <p className="text-[11px] font-medium text-blue-800 leading-relaxed italic">{test.questions[test.current].expl}</p>
                                        </div>
                                    )}
                                </div>

                                <div className="flex gap-3 mb-10">
                                    <button onClick={() => setTest({...test, current: Math.max(0, test.current - 1)})} className="flex-1 bg-white text-slate-400 py-5 rounded-2xl font-black text-xs border border-slate-100 active-scale uppercase">Anterior</button>
                                    <button 
                                        onClick={() => {
                                            if(test.current < test.questions.length - 1) setTest({...test, current: test.current + 1});
                                            else setView('results');
                                        }}
                                        className="flex-[2] bg-[#043d26] text-white py-5 rounded-2xl font-black text-xs shadow-xl active-scale uppercase tracking-widest"
                                    >
                                        {test.current === test.questions.length - 1 ? 'Finalizar Test' : 'Siguiente'}
                                    </button>
                                </div>
                            </div>
                        )}

                        {view === 'errors' && (
                            <div className="pt-4 space-y-4">
                                <div className="flex justify-between items-center mb-6 px-2">
                                    <h2 className="text-xl font-black text-red-600 italic uppercase">C√°mara de Fallos</h2>
                                    <button onClick={() => setView('home')} className="text-[10px] font-black text-slate-400 underline uppercase">Salir</button>
                                </div>
                                {errors.length === 0 ? (
                                    <div className="text-center py-24 grayscale opacity-30">
                                        <p className="text-6xl mb-4">üèÜ</p>
                                        <p className="font-black italic text-xs uppercase tracking-widest">Sin fallos registrados</p>
                                    </div>
                                ) : (
                                    errors.map((err, i) => (
                                        <div key={i} className="bg-white p-6 rounded-[2.5rem] shadow-sm border border-red-50 border-l-4 border-l-red-500">
                                            <p className="text-[8px] font-black text-red-500 uppercase mb-2">{err.topic}</p>
                                            <p className="text-sm font-bold text-slate-800 mb-4">{err.q}</p>
                                            <div className="bg-emerald-50 p-3 rounded-xl border border-emerald-100">
                                                <p className="text-[9px] font-black text-emerald-600 uppercase">Correcta:</p>
                                                <p className="text-xs font-bold text-emerald-800">{err.options[err.correct]}</p>
                                            </div>
                                        </div>
                                    ))
                                )}
                            </div>
                        )}

                        {view === 'results' && (
                            <div className="text-center py-16 animate-in zoom-in-90 duration-500">
                                <p className="text-[10px] font-black text-emerald-600 uppercase mb-4 tracking-[0.5em]">Calificaci√≥n Final</p>
                                <div className="text-9xl font-black text-[#043d26] mb-10 tracking-tighter">
                                    {Math.round((Object.keys(test.answers).filter(k => test.answers[k] === test.questions[k].correct).length / test.questions.length) * 100)}<span className="text-3xl text-slate-300">%</span>
                                </div>
                                <div className="px-6 space-y-3">
                                    <button onClick={() => setView('home')} className="w-full bg-[#043d26] text-white py-6 rounded-[2.5rem] font-black shadow-2xl active-scale uppercase">Volver al Panel</button>
                                    <button onClick={() => startTest(selectedTopic)} className="w-full bg-slate-100 text-slate-400 py-4 rounded-2xl font-black text-[10px] uppercase italic">Repetir Simulacro</button>
                                </div>
                            </div>
                        )}
                    </main>

                    {/* BARRA DE NAVEGACI√ìN INFERIOR */}
                    {view === 'home' && (
                        <nav className="fixed bottom-6 left-5 right-5 max-w-md mx-auto bg-white/80 backdrop-blur-2xl border border-white/50 h-20 rounded-[2.5rem] shadow-2xl flex items-center justify-around px-8 z-50">
                            <button className="flex flex-col items-center gap-1 text-[#043d26]">
                                <span className="text-2xl">üèõÔ∏è</span>
                                <span className="text-[8px] font-black uppercase">Panel</span>
                            </button>
                            <button onClick={() => setView('errors')} className="flex flex-col items-center gap-1 text-slate-300">
                                <span className="text-2xl">‚ö°</span>
                                <span className="text-[8px] font-black uppercase">Repaso</span>
                            </button>
                            <button className="flex flex-col items-center gap-1 text-slate-300">
                                <span className="text-2xl">üìä</span>
                                <span className="text-[8px] font-black uppercase">Stats</span>
                            </button>
                        </nav>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
